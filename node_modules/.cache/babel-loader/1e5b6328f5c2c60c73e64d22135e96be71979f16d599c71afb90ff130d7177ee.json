{"ast":null,"code":"// src/api/auth.js\nimport axios from \"axios\";\nconst API = \"\";\nexport const loginAPI = async (email, password) => {\n  if (!email || !password) {\n    throw new Error(\"Vui lòng nhập đầy đủ email và mật khẩu\");\n  }\n  try {\n    const res = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email: email.trim().toLowerCase()\n      }\n    });\n    const user = res.data[0];\n    if (!user) throw new Error(\"Email không tồn tại\");\n    if (user.password !== password.trim()) {\n      throw new Error(\"Sai mật khẩu\");\n    }\n    return user;\n  } catch (err) {\n    throw new Error(err.message || \"Lỗi kết nối máy chủ\");\n  }\n};\nexport const registerAPI = async _ref => {\n  let {\n    name,\n    email,\n    password\n  } = _ref;\n  if (!name || !email || !password) {\n    throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\n  }\n  try {\n    const check = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email: email.trim().toLowerCase()\n      }\n    });\n    if (check.data.length > 0) {\n      throw new Error(\"Email đã tồn tại\");\n    }\n    const newUser = {\n      name,\n      email: email.trim().toLowerCase(),\n      password: password.trim(),\n      role: \"student\"\n    };\n    const res = await axios.post(\"\".concat(API, \"/users\"), newUser);\n    return res.data;\n  } catch (err) {\n    throw new Error(err.message || \"Lỗi khi đăng ký\");\n  }\n};","map":{"version":3,"names":["axios","API","loginAPI","email","password","Error","res","get","concat","params","trim","toLowerCase","user","data","err","message","registerAPI","_ref","name","check","length","newUser","role","post"],"sources":["C:/Users/pc/Downloads/2f4eb167-bfef-49e9-961b-e81de2ed3322/src/api/auth.js"],"sourcesContent":["// src/api/auth.js\r\nimport axios from \"axios\";\r\n\r\nconst API = \"\";\r\n\r\nexport const loginAPI = async (email, password) => {\r\n  if (!email || !password) {\r\n    throw new Error(\"Vui lòng nhập đầy đủ email và mật khẩu\");\r\n  }\r\n\r\n  try {\r\n    const res = await axios.get(`${API}/users`, {\r\n      params: { email: email.trim().toLowerCase() },\r\n    });\r\n\r\n    const user = res.data[0];\r\n\r\n    if (!user) throw new Error(\"Email không tồn tại\");\r\n\r\n    if (user.password !== password.trim()) {\r\n      throw new Error(\"Sai mật khẩu\");\r\n    }\r\n\r\n    return user;\r\n  } catch (err) {\r\n    throw new Error(err.message || \"Lỗi kết nối máy chủ\");\r\n  }\r\n};\r\n\r\nexport const registerAPI = async ({ name, email, password }) => {\r\n  if (!name || !email || !password) {\r\n    throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\r\n  }\r\n\r\n  try {\r\n    const check = await axios.get(`${API}/users`, {\r\n      params: { email: email.trim().toLowerCase() },\r\n    });\r\n\r\n    if (check.data.length > 0) {\r\n      throw new Error(\"Email đã tồn tại\");\r\n    }\r\n\r\n    const newUser = {\r\n      name,\r\n      email: email.trim().toLowerCase(),\r\n      password: password.trim(),\r\n      role: \"student\",\r\n    };\r\n\r\n    const res = await axios.post(`${API}/users`, newUser);\r\n    return res.data;\r\n  } catch (err) {\r\n    throw new Error(err.message || \"Lỗi khi đăng ký\");\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAG,EAAE;AAEd,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EACjD,IAAI,CAACD,KAAK,IAAI,CAACC,QAAQ,EAAE;IACvB,MAAM,IAAIC,KAAK,CAAC,wCAAwC,CAAC;EAC3D;EAEA,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,GAAG,IAAAC,MAAA,CAAIP,GAAG,aAAU;MAC1CQ,MAAM,EAAE;QAAEN,KAAK,EAAEA,KAAK,CAACO,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAAE;IAC9C,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAGN,GAAG,CAACO,IAAI,CAAC,CAAC,CAAC;IAExB,IAAI,CAACD,IAAI,EAAE,MAAM,IAAIP,KAAK,CAAC,qBAAqB,CAAC;IAEjD,IAAIO,IAAI,CAACR,QAAQ,KAAKA,QAAQ,CAACM,IAAI,CAAC,CAAC,EAAE;MACrC,MAAM,IAAIL,KAAK,CAAC,cAAc,CAAC;IACjC;IAEA,OAAOO,IAAI;EACb,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,MAAM,IAAIT,KAAK,CAACS,GAAG,CAACC,OAAO,IAAI,qBAAqB,CAAC;EACvD;AACF,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,MAAAC,IAAA,IAAqC;EAAA,IAA9B;IAAEC,IAAI;IAAEf,KAAK;IAAEC;EAAS,CAAC,GAAAa,IAAA;EACzD,IAAI,CAACC,IAAI,IAAI,CAACf,KAAK,IAAI,CAACC,QAAQ,EAAE;IAChC,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;EACnD;EAEA,IAAI;IACF,MAAMc,KAAK,GAAG,MAAMnB,KAAK,CAACO,GAAG,IAAAC,MAAA,CAAIP,GAAG,aAAU;MAC5CQ,MAAM,EAAE;QAAEN,KAAK,EAAEA,KAAK,CAACO,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MAAE;IAC9C,CAAC,CAAC;IAEF,IAAIQ,KAAK,CAACN,IAAI,CAACO,MAAM,GAAG,CAAC,EAAE;MACzB,MAAM,IAAIf,KAAK,CAAC,kBAAkB,CAAC;IACrC;IAEA,MAAMgB,OAAO,GAAG;MACdH,IAAI;MACJf,KAAK,EAAEA,KAAK,CAACO,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACjCP,QAAQ,EAAEA,QAAQ,CAACM,IAAI,CAAC,CAAC;MACzBY,IAAI,EAAE;IACR,CAAC;IAED,MAAMhB,GAAG,GAAG,MAAMN,KAAK,CAACuB,IAAI,IAAAf,MAAA,CAAIP,GAAG,aAAUoB,OAAO,CAAC;IACrD,OAAOf,GAAG,CAACO,IAAI;EACjB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZ,MAAM,IAAIT,KAAK,CAACS,GAAG,CAACC,OAAO,IAAI,iBAAiB,CAAC;EACnD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}