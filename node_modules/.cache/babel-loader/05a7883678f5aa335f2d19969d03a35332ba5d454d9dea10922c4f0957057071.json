{"ast":null,"code":"import axios from \"axios\";\nconst API = \"http://localhost:3001\";\n\n// Đăng nhập từ JSON Server\nexport const loginAPI = async (email, password) => {\n  if (!email || !password) {\n    throw new Error(\"Vui lòng nhập đầy đủ email và mật khẩu\");\n  }\n  try {\n    const res = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email,\n        password\n      }\n    });\n    if (!res.data || res.data.length === 0) {\n      throw new Error(\"Sai tài khoản hoặc mật khẩu\");\n    }\n    return res.data[0];\n  } catch (err) {\n    throw new Error(err.message || \"Lỗi kết nối đến máy chủ\");\n  }\n};\n\n// Đăng ký sinh viên mới\nexport const registerAPI = async data => {\n  const {\n    email,\n    password,\n    name\n  } = data;\n  if (!email || !password || !name) {\n    throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\n  }\n  try {\n    // Kiểm tra email đã tồn tại chưa\n    const check = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email\n      }\n    });\n    if (check.data.length > 0) {\n      throw new Error(\"Email đã tồn tại\");\n    }\n    const newUser = {\n      email,\n      password,\n      name,\n      role: \"student\" // mặc định là sinh viên\n    };\n    const res = await axios.post(\"\".concat(API, \"/users\"), newUser);\n    return res.data;\n  } catch (err) {\n    throw new Error(err.message || \"Lỗi khi đăng ký tài khoản\");\n  }\n};","map":{"version":3,"names":["axios","API","loginAPI","email","password","Error","res","get","concat","params","data","length","err","message","registerAPI","name","check","newUser","role","post"],"sources":["C:/Users/pc/Downloads/2f4eb167-bfef-49e9-961b-e81de2ed3322/src/api/auth.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API = \"http://localhost:3001\";\r\n\r\n// Đăng nhập từ JSON Server\r\nexport const loginAPI = async (email, password) => {\r\n  if (!email || !password) {\r\n    throw new Error(\"Vui lòng nhập đầy đủ email và mật khẩu\");\r\n  }\r\n\r\n  try {\r\n    const res = await axios.get(`${API}/users`, {\r\n      params: { email, password },\r\n    });\r\n\r\n    if (!res.data || res.data.length === 0) {\r\n      throw new Error(\"Sai tài khoản hoặc mật khẩu\");\r\n    }\r\n\r\n    return res.data[0];\r\n  } catch (err) {\r\n    throw new Error(err.message || \"Lỗi kết nối đến máy chủ\");\r\n  }\r\n};\r\n\r\n// Đăng ký sinh viên mới\r\nexport const registerAPI = async (data) => {\r\n  const { email, password, name } = data;\r\n\r\n  if (!email || !password || !name) {\r\n    throw new Error(\"Vui lòng nhập đầy đủ thông tin\");\r\n  }\r\n\r\n  try {\r\n    // Kiểm tra email đã tồn tại chưa\r\n    const check = await axios.get(`${API}/users`, {\r\n      params: { email },\r\n    });\r\n\r\n    if (check.data.length > 0) {\r\n      throw new Error(\"Email đã tồn tại\");\r\n    }\r\n\r\n    const newUser = {\r\n      email,\r\n      password,\r\n      name,\r\n      role: \"student\", // mặc định là sinh viên\r\n    };\r\n\r\n    const res = await axios.post(`${API}/users`, newUser);\r\n    return res.data;\r\n  } catch (err) {\r\n    throw new Error(err.message || \"Lỗi khi đăng ký tài khoản\");\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAG,uBAAuB;;AAEnC;AACA,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EACjD,IAAI,CAACD,KAAK,IAAI,CAACC,QAAQ,EAAE;IACvB,MAAM,IAAIC,KAAK,CAAC,wCAAwC,CAAC;EAC3D;EAEA,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMN,KAAK,CAACO,GAAG,IAAAC,MAAA,CAAIP,GAAG,aAAU;MAC1CQ,MAAM,EAAE;QAAEN,KAAK;QAAEC;MAAS;IAC5B,CAAC,CAAC;IAEF,IAAI,CAACE,GAAG,CAACI,IAAI,IAAIJ,GAAG,CAACI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MACtC,MAAM,IAAIN,KAAK,CAAC,6BAA6B,CAAC;IAChD;IAEA,OAAOC,GAAG,CAACI,IAAI,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,MAAM,IAAIP,KAAK,CAACO,GAAG,CAACC,OAAO,IAAI,yBAAyB,CAAC;EAC3D;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,WAAW,GAAG,MAAOJ,IAAI,IAAK;EACzC,MAAM;IAAEP,KAAK;IAAEC,QAAQ;IAAEW;EAAK,CAAC,GAAGL,IAAI;EAEtC,IAAI,CAACP,KAAK,IAAI,CAACC,QAAQ,IAAI,CAACW,IAAI,EAAE;IAChC,MAAM,IAAIV,KAAK,CAAC,gCAAgC,CAAC;EACnD;EAEA,IAAI;IACF;IACA,MAAMW,KAAK,GAAG,MAAMhB,KAAK,CAACO,GAAG,IAAAC,MAAA,CAAIP,GAAG,aAAU;MAC5CQ,MAAM,EAAE;QAAEN;MAAM;IAClB,CAAC,CAAC;IAEF,IAAIa,KAAK,CAACN,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;MACzB,MAAM,IAAIN,KAAK,CAAC,kBAAkB,CAAC;IACrC;IAEA,MAAMY,OAAO,GAAG;MACdd,KAAK;MACLC,QAAQ;MACRW,IAAI;MACJG,IAAI,EAAE,SAAS,CAAE;IACnB,CAAC;IAED,MAAMZ,GAAG,GAAG,MAAMN,KAAK,CAACmB,IAAI,IAAAX,MAAA,CAAIP,GAAG,aAAUgB,OAAO,CAAC;IACrD,OAAOX,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,MAAM,IAAIP,KAAK,CAACO,GAAG,CAACC,OAAO,IAAI,2BAA2B,CAAC;EAC7D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}