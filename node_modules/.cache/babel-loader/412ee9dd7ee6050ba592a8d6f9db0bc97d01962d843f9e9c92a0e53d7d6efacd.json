{"ast":null,"code":"import _objectSpread from \"C:/Users/pc/Downloads/2f4eb167-bfef-49e9-961b-e81de2ed3322/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport axios from \"axios\";\nconst API = \"http://localhost:3001\";\n\n// Đăng nhập từ JSON Server\nexport const loginAPI = async (email, password) => {\n  try {\n    const res = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email,\n        password\n      }\n    });\n    if (res.data.length === 0) {\n      throw new Error(\"Sai tài khoản hoặc mật khẩu\");\n    }\n    return res.data[0];\n  } catch (err) {\n    throw err.message || \"Lỗi kết nối server\";\n  }\n};\n\n// Đăng ký sinh viên mới\nexport const registerAPI = async data => {\n  try {\n    // Kiểm tra xem email đã tồn tại chưa\n    const check = await axios.get(\"\".concat(API, \"/users\"), {\n      params: {\n        email: data.email\n      }\n    });\n    if (check.data.length > 0) {\n      throw new Error(\"Email đã tồn tại\");\n    }\n    const newUser = _objectSpread(_objectSpread({}, data), {}, {\n      role: \"student\" // mặc định là student\n    });\n    const res = await axios.post(\"\".concat(API, \"/users\"), newUser);\n    return res.data;\n  } catch (err) {\n    throw err.message || \"Lỗi đăng ký\";\n  }\n};","map":{"version":3,"names":["axios","API","loginAPI","email","password","res","get","concat","params","data","length","Error","err","message","registerAPI","check","newUser","_objectSpread","role","post"],"sources":["C:/Users/pc/Downloads/2f4eb167-bfef-49e9-961b-e81de2ed3322/src/api/auth.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API = \"http://localhost:3001\";\r\n\r\n// Đăng nhập từ JSON Server\r\nexport const loginAPI = async (email, password) => {\r\n  try {\r\n    const res = await axios.get(`${API}/users`, {\r\n      params: { email, password },\r\n    });\r\n    if (res.data.length === 0) {\r\n      throw new Error(\"Sai tài khoản hoặc mật khẩu\");\r\n    }\r\n    return res.data[0];\r\n  } catch (err) {\r\n    throw err.message || \"Lỗi kết nối server\";\r\n  }\r\n};\r\n\r\n// Đăng ký sinh viên mới\r\nexport const registerAPI = async (data) => {\r\n  try {\r\n    // Kiểm tra xem email đã tồn tại chưa\r\n    const check = await axios.get(`${API}/users`, {\r\n      params: { email: data.email },\r\n    });\r\n\r\n    if (check.data.length > 0) {\r\n      throw new Error(\"Email đã tồn tại\");\r\n    }\r\n\r\n    const newUser = {\r\n      ...data,\r\n      role: \"student\", // mặc định là student\r\n    };\r\n\r\n    const res = await axios.post(`${API}/users`, newUser);\r\n    return res.data;\r\n  } catch (err) {\r\n    throw err.message || \"Lỗi đăng ký\";\r\n  }\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAG,uBAAuB;;AAEnC;AACA,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EACjD,IAAI;IACF,MAAMC,GAAG,GAAG,MAAML,KAAK,CAACM,GAAG,IAAAC,MAAA,CAAIN,GAAG,aAAU;MAC1CO,MAAM,EAAE;QAAEL,KAAK;QAAEC;MAAS;IAC5B,CAAC,CAAC;IACF,IAAIC,GAAG,CAACI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MACzB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;IAChD;IACA,OAAON,GAAG,CAACI,IAAI,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZ,MAAMA,GAAG,CAACC,OAAO,IAAI,oBAAoB;EAC3C;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,WAAW,GAAG,MAAOL,IAAI,IAAK;EACzC,IAAI;IACF;IACA,MAAMM,KAAK,GAAG,MAAMf,KAAK,CAACM,GAAG,IAAAC,MAAA,CAAIN,GAAG,aAAU;MAC5CO,MAAM,EAAE;QAAEL,KAAK,EAAEM,IAAI,CAACN;MAAM;IAC9B,CAAC,CAAC;IAEF,IAAIY,KAAK,CAACN,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;MACzB,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;IACrC;IAEA,MAAMK,OAAO,GAAAC,aAAA,CAAAA,aAAA,KACRR,IAAI;MACPS,IAAI,EAAE,SAAS,CAAE;IAAA,EAClB;IAED,MAAMb,GAAG,GAAG,MAAML,KAAK,CAACmB,IAAI,IAAAZ,MAAA,CAAIN,GAAG,aAAUe,OAAO,CAAC;IACrD,OAAOX,GAAG,CAACI,IAAI;EACjB,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZ,MAAMA,GAAG,CAACC,OAAO,IAAI,aAAa;EACpC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}